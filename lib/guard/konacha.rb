require 'guard/compat/plugin'
require 'rails'
require 'konacha'

module Guard
  class Konacha < Plugin
    autoload :Runner, 'guard/konacha/runner'
    autoload :Formatter, 'guard/konacha/formatter'
    autoload :Server, 'guard/konacha/server'

    attr_accessor :runner

    def initialize(options = {})
      super

      @runner = Runner.new(options)
    end

    def start
      runner.start
    end

    def run_all
      runner.run
    end

    def run_on_changes(paths = [])
      runner.run(paths)
    end
  end
end
